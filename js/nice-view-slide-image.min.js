let niceViewSlide=document.querySelectorAll(".popup-nice-view-slide");var elem=document.documentElement;function createPopUpNiceViewSlideImage(){let e=document.createElement("div"),t=document.createElement("div"),i=document.createElement("div");e.setAttributes({id:"myPopUpNiceSlideView",class:"nice-view-slide__pop-up"}),t.setAttributes({class:"nice-view-slide__pop-up-content"}),i.setAttributes({id:"popUpNiceSlideViewListSlides",class:"nice-view-slide__pop-up-list-slides"}),niceViewSlide.forEach((e=>{if(null==e.getAttribute("data-nice-view-src")||""==e.getAttribute("data-nice-view-src")||null==e.getAttribute("data-nice-view-src"))return alert("Attribute data-nice-view-src must be used"),!1;i.innerHTML+=`<div class="mySlidesNiceSlideView" data-desc="${null!==e.getAttribute("data-nice-view-desc")?e.getAttribute("data-nice-view-desc"):""}" data-sh-link="${null!==e.getAttribute("data-nice-view-sh-link")?e.getAttribute("data-nice-view-sh-link"):"#"}" data-src="${e.getAttribute("data-nice-view-src")}">\n        <img class="nice-view-slide__pop-up-content-file" src="${e.getAttribute("data-nice-view-src")}">\n      </div>`})),t.innerHTML+=i.outerHTML,t.innerHTML+='<div class="nice-view-slide__pop-up-page-number"></div>',t.innerHTML+='<div class="nice-view-slide__pop-up-caption-container"><p id="myPopUpNiceSlideViewCaption"></p></div>',t.innerHTML+='<a id="myPopUpNiceSlideViewPrev" class="nice-view-slide__pop-up-prev">&#10094;</a>',t.innerHTML+='<a id="myPopUpNiceSlideViewNext" class="nice-view-slide__pop-up-next">&#10095;</a>',e.innerHTML+='<a href="javascript:;" id="closePopUpNiceView" class="nice-view-slide__close-pop-up" title="close">Ã—</a>',e.innerHTML+='<a href="javascript:;" id="fullScreenPopUpNiceView" class="nice-view-slide__full-screen-pop-up" onclick="btnFullScreen()" title="full screen"><img src="./images/popup/full-screen.png" alt="full screen"></a>',e.innerHTML+='<a href="javascript:;" id="exitFullScreenPopUpNiceView" class="nice-view-slide__exit-full-screen-pop-up" onclick="btnFullScreen()" title="exit full screen" style="display:none"><img src="./images/popup/exit-full-screen.png" alt="exit full screen"></a>',e.innerHTML+='<a href="javascript:;" id="downloadPopUpNiceView" class="nice-view-slide__download-pop-up" title="download" ><img src="./images/popup/download.png" alt="download"></a>',e.innerHTML+='<a href="javascript:;" id="sharePopUpNiceView" class="nice-view-slide__share-pop-up" title="share"><img src="./images/popup/share.svg" alt="share"></a>',e.innerHTML+='<ul id="popUpContentShareList" class="popup-nice-view-slide__share-list" style="display:none">\n    <li id="popNiceViewShareToFb" class="popup-nice-view-slide__share-list-content"><a href="javascript:;" title="Facebook"><img src="./images/popup/fb.svg" alt="Facebook">Facebook</a></li>\n    <li id="popNiceViewShareToTw" class="popup-nice-view-slide__share-list-content"><a href="javascript:;" title="Twitter"><img src="./images/popup/tw.svg" alt="Twitter">Twitter</a></li>\n    <li id="popNiceViewShareToCopyLink" class="popup-nice-view-slide__share-list-content"><a href="javascript:;" title="Copy Link"><img src="./images/popup/copy-link.png" alt="Copy Link">Copy Link</a></li>\n    </ul>',e.innerHTML+=t.outerHTML,document.body.appendChild(e)}Element.prototype.setAttributes=function(e){for(var t in e)if("styles"!=t&&"style"!=t||"object"!=typeof e[t])"html"==t?this.innerHTML=e[t]:this.setAttribute(t,e[t]);else for(var i in e[t])this.style[i]=e[t][i]},createPopUpNiceViewSlideImage();let closePopUpNiceView=document.querySelector("#closePopUpNiceView");const slideritems=document.querySelectorAll("#popUpNiceSlideViewListSlides .mySlidesNiceSlideView"),prevSlider=document.querySelector("#myPopUpNiceSlideViewPrev"),nextSlider=document.querySelector("#myPopUpNiceSlideViewNext"),pageNumberPopUp=document.querySelector(".nice-view-slide__pop-up-page-number"),pageCaptionPopUp=document.querySelector("#myPopUpNiceSlideViewCaption");var Xposition=0,XpositionMove=0,XNewPosition=0,slide=0,XNewPositionFinal=0,currentPosition=0,itemWidth=slideritems.length>0?slideritems[0].clientWidth:0,maxslide=itemWidth*(slideritems.length-1),slideNow=0;function startSlide(e=null){itemWidth=slideritems[0].clientWidth,maxslide=itemWidth*(slideritems.length-1),slideritems.forEach(((t,i)=>{null!=e?(currentPosition=slideritems[e].getAttribute("data-width"),parseInt(t.getAttribute("data-width"))==currentPosition?(t.setAttribute("current","true"),checkArrow(i)):t.setAttribute("current","false")):t.setAttribute("current","false"),t.style.transition="left .3s ease-in-out",t.style.left=`${currentPosition}px`,t.setAttribute("data-idx",i)})),XNewPositionFinal=parseInt(currentPosition),Xposition=0,XpositionMove=0,XNewPosition=0,slide=0}function openFullscreen(){elem.requestFullscreen?elem.requestFullscreen():elem.webkitRequestFullscreen?elem.webkitRequestFullscreen():elem.msRequestFullscreen&&elem.msRequestFullscreen()}function closeFullscreen(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}function btnFullScreen(){document.fullscreenElement?(closeFullscreen(),document.querySelector("#fullScreenPopUpNiceView").setAttribute("style","display:block"),document.querySelector("#exitFullScreenPopUpNiceView").setAttribute("style","display:none")):(openFullscreen(),document.querySelector("#fullScreenPopUpNiceView").setAttribute("style","display:none"),document.querySelector("#exitFullScreenPopUpNiceView").setAttribute("style","display:block"))}async function downloadImage(e,t){const i=await fetch(e),n=await i.blob(),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(s)}document.querySelector("#downloadPopUpNiceView").addEventListener("click",(e=>{e.preventDefault();let t=document.querySelector("#downloadPopUpNiceView").getAttribute("data-src").replace(/^.*[\\\/]/,"");downloadImage(document.querySelector("#downloadPopUpNiceView").getAttribute("data-src"),Date.now()+"-"+t)}));let timerShareList,sharePopUpNiceView=document.querySelector("#sharePopUpNiceView"),popUpContentShareList=document.querySelector("#popUpContentShareList");function toggleShare(){"display:none"==popUpContentShareList.getAttribute("style")?popUpContentShareList.setAttribute("style","display:block"):popUpContentShareList.setAttribute("style","display:none")}const onClickOutside=e=>{window.addEventListener("click",(t=>{t.preventDefault(),clearTimeout(timerShareList),timerShareList=setTimeout((()=>{"mouseleave"==e.type&&"display:block"==popUpContentShareList.getAttribute("style")&&popUpContentShareList.setAttribute("style","display:none")}),1)}))};function startDragging(e){Xposition=e.pageX||e.touches[0].pageX,document.addEventListener("mousemove",startMove),document.addEventListener("touchmove",startMove),document.addEventListener("mouseup",dragging),document.addEventListener("touchend",dragging)}function checkArrow(e){return pageNumberPopUp.innerHTML=`${e+1} / ${slideritems.length}`,pageCaptionPopUp.innerHTML=slideritems[e].getAttribute("data-desc"),document.querySelector("#downloadPopUpNiceView").setAttributes({"data-src":slideritems[e].getAttribute("data-src")}),document.querySelector("#popNiceViewShareToFb").setAttributes({href:"https://www.facebook.com/share.php?u="+slideritems[e].getAttribute("data-sh-link")}),document.querySelector("#popNiceViewShareToTw").setAttributes({href:"https://twitter.com/intent/tweet?url="+slideritems[e].getAttribute("data-sh-link")}),document.querySelector("#popNiceViewShareToCopyLink").setAttributes({"data-link":slideritems[e].getAttribute("data-sh-link")}),0==e?(prevSlider.style.display="none",!1):e==slideritems.length-1?(nextSlider.style.display="none",!1):(prevSlider.style.display="block",nextSlider.style.display="block",!0)}function dragging(){document.removeEventListener("mousemove",startMove),document.removeEventListener("touchmove",startMove),XNewPositionFinal=parseInt(XNewPositionFinal)+parseInt(XNewPosition),slide<0?Math.abs(slide)>150&&Math.abs(currentPosition-itemWidth)<=maxslide&&(currentPosition=parseInt(currentPosition)-parseInt(itemWidth)):Math.abs(slide)>150&&Math.abs(currentPosition-itemWidth)>itemWidth&&(currentPosition=parseInt(currentPosition)+parseInt(itemWidth)),slideritems.forEach(((e,t)=>{e.style.transition="left .3s ease-in-out",e.style.left=`${currentPosition}px`,parseInt(e.getAttribute("data-width"))==currentPosition?(e.setAttribute("current","true"),checkArrow(t)):e.setAttribute("current","false"),setTimeout((()=>{e.style.transition="none"}),800)})),XNewPositionFinal=parseInt(currentPosition),Xposition=0,XpositionMove=0,XNewPosition=0,slide=0}function startMove(e){e.preventDefault(),XpositionMove=e.pageX||e.touches[0].pageX,slide=parseInt(XpositionMove)-parseInt(Xposition),XNewPosition=parseInt(XNewPositionFinal)+parseInt(slide),slideritems.forEach((e=>{e.style.left=`${XNewPosition}px`}))}function changeSlide(e,t){let i,n;e.preventDefault(),"left"==t?slideritems.forEach(((e,t)=>{t>0&&"true"==e.getAttribute("current")&&(i=t-1)})):slideritems.forEach(((e,t)=>{t<slideritems.length-1&&"true"==e.getAttribute("current")&&(i=t+1)})),null!=i&&(checkArrow(i),n=parseInt(slideritems[i].getAttribute("data-width")),currentPosition=n,slideritems.forEach((e=>{e.style.transition="left .3s ease-in-out",e.style.left=`${n}px`,parseInt(e.getAttribute("data-width"))==currentPosition?e.setAttribute("current","true"):e.setAttribute("current","false")}))),XNewPositionFinal=parseInt(currentPosition),Xposition=0,XpositionMove=0,XNewPosition=0,slide=0}function checkKey(e){"37"==e.keyCode?changeSlide(e,"left"):"39"==e.keyCode?changeSlide(e,"right"):"70"==e.keyCode&&btnFullScreen()}sharePopUpNiceView.addEventListener("click",(e=>{e.preventDefault(),toggleShare()})),sharePopUpNiceView.addEventListener("mouseleave",onClickOutside),sharePopUpNiceView.addEventListener("mouseenter",onClickOutside),popUpContentShareList.addEventListener("mouseleave",onClickOutside),popUpContentShareList.addEventListener("mouseenter",onClickOutside),niceViewSlide.forEach(((e,t)=>{e.addEventListener("click",(e=>{e.preventDefault(),document.getElementById("myPopUpNiceSlideView").style.display="block",document.querySelector(".nice-view-slide__pop-up-list-slides").setAttribute("style",`width:calc(100% * ${slideritems.length})`),slideritems.forEach(((e,t)=>{t>0?e.setAttribute("data-width","-"+e.offsetWidth*t):e.setAttribute("data-width","0")})),startSlide(t)}))})),closePopUpNiceView.addEventListener("click",(e=>{e.preventDefault(),document.getElementById("myPopUpNiceSlideView").style.display="none"})),document.querySelectorAll(".popup-nice-view-slide__share-list-content").forEach((e=>{"popNiceViewShareToCopyLink"==e.getAttribute("id")?e.addEventListener("click",(t=>{t.preventDefault();var i=document.createElement("input"),n=e.getAttribute("data-link");document.body.appendChild(i),i.value=n,i.select(),document.execCommand("copy"),document.body.removeChild(i)})):e.addEventListener("click",(t=>{t.preventDefault(),window.open(e.getAttribute("href"),"myWindow","status = 1, height = 760, width = 760, resizable = 0")}))})),prevSlider.addEventListener("click",(function(e){changeSlide(e,"left")})),nextSlider.addEventListener("click",(function(e){changeSlide(e,"right")})),document.onkeydown=checkKey,slideritems.forEach((e=>{e.addEventListener("mousedown",startDragging),e.addEventListener("touchstart",startDragging)}));